/**
 * @file Firestore Security Rules
 * @description This ruleset configures open read and write access to all collections in the database.
 *   This is suitable for prototyping and internal tools where data access is not restricted.
 * @data-structure
 *   - /partners/{partnerId}
 *   - /loans/{loanId}
 *   - /installments/{installmentId}
 *   - /payments/{paymentId}
 *   - /receipts/{receiptId}
 *   - /reports/{reportId}
 *   - /anomalies/{anomalyId}
 * @key-security-decisions
 *   - Public read and write access to all collections.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows any user to read or write Partner documents.
     * @path /partners/{partnerId}
     * @allow (get, list, create, update, delete) Any authenticated user can read/write any Partner document.
     * @deny None.
     * @principle Allows open read and write access.
     */
    match /partners/{partnerId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows any user to read or write Loan documents.
     * @path /loans/{loanId}
     * @allow (get, list, create, update, delete) Any authenticated user can read/write any Loan document.
     * @deny None.
     * @principle Allows open read and write access.
     */
    match /loans/{loanId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows any user to read or write Installment documents.
     * @path /installments/{installmentId}
     * @allow (get, list, create, update, delete) Any authenticated user can read/write any Installment document.
     * @deny None.
     * @principle Allows open read and write access.
     */
    match /installments/{installmentId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows any user to read or write Payment documents.
     * @path /payments/{paymentId}
     * @allow (get, list, create, update, delete) Any authenticated user can read/write any Payment document.
     * @deny None.
     * @principle Allows open read and write access.
     */
    match /payments/{paymentId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows any user to read or write Receipt documents.
     * @path /receipts/{receiptId}
     * @allow (get, list, create, update, delete) Any authenticated user can read/write any Receipt document.
     * @deny None.
     * @principle Allows open read and write access.
     */
    match /receipts/{receiptId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows any user to read or write Report documents.
     * @path /reports/{reportId}
     * @allow (get, list, create, update, delete) Any authenticated user can read/write any Report document.
     * @deny None.
     * @principle Allows open read and write access.
     */
    match /reports/{reportId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows any user to read or write Anomaly documents.
     * @path /anomalies/{anomalyId}
     * @allow (get, list, create, update, delete) Any authenticated user can read/write any Anomaly document.
     * @deny None.
     * @principle Allows open read and write access.
     */
    match /anomalies/{anomalyId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }
  }
}